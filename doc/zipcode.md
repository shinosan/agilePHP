# 郵便番号DB
## 各列の説明
1. 全国地方公共団体コード（JIS X0401、X0402）………　半角数字
1. （旧）郵便番号（5桁）………………………………………　半角数字
1. 郵便番号（7桁）………………………………………　半角数字
1. 都道府県名　…………　半角カタカナ（コード順に掲載）　（注1）
1. 市区町村名　…………　半角カタカナ（コード順に掲載）　（注1）
1. 町域名　………………　半角カタカナ（五十音順に掲載）　（注1）
1. 都道府県名　…………　漢字（コード順に掲載）　（注1,2）
1. 市区町村名　…………　漢字（コード順に掲載）　（注1,2）
1. 町域名　………………　漢字（五十音順に掲載）　（注1,2）
1. 一町域が二以上の郵便番号で表される場合の表示　（注3）　（「1」は該当、「0」は該当せず）
1. 小字毎に番地が起番されている町域の表示　（注4）　（「1」は該当、「0」は該当せず）
1. 丁目を有する町域の場合の表示　（「1」は該当、「0」は該当せず）
1. 一つの郵便番号で二以上の町域を表す場合の表示　（注5）　（「1」は該当、「0」は該当せず）
1. 更新の表示（注6）（「0」は変更なし、「1」は変更あり、「2」廃止（廃止データのみ使用））
1. 変更理由　（「0」は変更なし、「1」市政・区政・町政・分区・政令指定都市施行、「2」住居表示の実施、「3」区画整理、「4」郵便区調整等、「5」訂正、「6」廃止（廃止データのみ使用））

## 注の説明
- ※1
 文字コードには、MS漢字コード（SHIFT JIS）を使用しています。  
- ※2
 文字セットとして、JIS X0208-1983を使用し、規定されていない文字はひらがなで表記しています。  
- ※3
 「一町域が二以上の郵便番号で表される場合の表示」とは、町域のみでは郵便番号が特定できず、丁目、番地、小字などにより番号が異なる町域のことです。  
- ※4
 「小字毎に番地が起番されている町域の表示」とは、郵便番号を設定した町域（大字）が複数の小字を有しており、各小字毎に番地が起番されているため、町域（郵便番号）と番地だけでは住所が特定できない町域のことです。  
- ※5
「一つの郵便番号で二以上の町域を表す場合の表示」とは、一つの郵便番号で複数の町域をまとめて表しており、郵便番号と番地だけでは住所が特定できないことを示すものです。
- ※6
「変更あり」とは追加および修正により更新されたデータを示すものです。
- ※7
全角となっている町域名の文字数が38文字を超える場合、また、半角カタカナとなっている町域名のフリガナが76文字を越える場合には、複数レコードに分割しています。
## 郵便番号原本テーブル
- KEN_ALL.CSVの内容をUTF-8に変換し、そのまま格納する。
- 変更差分を適用する。 
	- 削除・追加CSVの照合は、郵便番号と漢字の町域まで
	- 削除CSVで該当するレコードのフラグを変更
	- 追加CSVで対象が存在すれば上書き、存在しなければ追加
- 以下の修正を行って「郵便番号テーブル」を生成する
	- 郵便番号を「nnn-nnnn」形式に変換
	- 半角カタカナを全角ひらがなに変換
	- 町域名が長すぎて複数レコードになっている行を連結
		- 全角「（」があるが「）」が無い
		- その間の町域名
		- 全角「）」があるが「（」が無い
		- 例) 088-2686 → 6行連結
	- 町域名「以下に掲載がない場合」は空文字列に変換
	- 町域名から「丁目、番地、小字」（「()」「、」「～」のある部分）を削除
		- 削除した部分は「町域選択用」列に格納
	- 「（旧）郵便番号（5桁)」、10列以降を削除
## 郵便番号テーブル
- 郵便番号→住所の検索
	- 町域が複数となる場合はリスト出力
- 住所→郵便番号の検索
	- 町域に対応する郵便番号が複数となる場合は「町域選択用」をリスト出力  
1. 主キー 半角数字（更新があっても値は保持されること）
1. 全国地方公共団体コード（JIS X0401、X0402）………　半角数字
1. 郵便番号（7桁）………………………………………　半角数字
1. 都道府県名　…………　ひらがな（コード順に掲載）　（注1）
1. 市区町村名　…………　ひらがな（コード順に掲載）　（注1）
1. 町域名　………………　ひらがな（五十音順に掲載）　（注1）
1. 都道府県名　…………　漢字（コード順に掲載）　（注1,2）
1. 市区町村名　…………　漢字（コード順に掲載）　（注1,2）
1. 町域名　………………　漢字（五十音順に掲載）　（注1,2）
1. 町域選択用
